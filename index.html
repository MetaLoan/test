<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>çœŸå®LottieåŠ¨ç”»çˆ¬å–å™¨</title>
  <style>
      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }
      
      body {
          font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          min-height: 100vh;
          padding: 20px;
      }
      
      .container {
          max-width: 1200px;
          margin: 0 auto;
          background: white;
          border-radius: 20px;
          box-shadow: 0 20px 40px rgba(0,0,0,0.1);
          overflow: hidden;
      }
      
      .header {
          background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
          color: white;
          padding: 30px;
          text-align: center;
      }
      
      .header h1 {
          font-size: 2.5em;
          margin-bottom: 10px;
      }
      
      .method-tabs {
          display: flex;
          background: #f8f9fa;
          border-bottom: 1px solid #dee2e6;
      }
      
      .tab {
          flex: 1;
          padding: 15px;
          text-align: center;
          cursor: pointer;
          border: none;
          background: transparent;
          font-weight: 600;
          transition: all 0.3s;
      }
      
      .tab.active {
          background: white;
          color: #ff6b6b;
          border-bottom: 3px solid #ff6b6b;
      }
      
      .tab-content {
          padding: 30px;
      }
      
      .method-section {
          display: none;
      }
      
      .method-section.active {
          display: block;
      }
      
      .input-group {
          margin-bottom: 20px;
      }
      
      .input-group label {
          display: block;
          margin-bottom: 8px;
          font-weight: 600;
          color: #333;
      }
      
      .input-group input, .input-group textarea {
          width: 100%;
          padding: 12px;
          border: 2px solid #e1e5e9;
          border-radius: 8px;
          font-size: 16px;
      }
      
      .input-group textarea {
          height: 200px;
          font-family: monospace;
          resize: vertical;
      }
      
      .btn {
          padding: 12px 24px;
          border: none;
          border-radius: 8px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s;
          margin-right: 10px;
          margin-bottom: 10px;
      }
      
      .btn-primary {
          background: #ff6b6b;
          color: white;
      }
      
      .btn-primary:hover {
          background: #ee5a24;
          transform: translateY(-2px);
      }
      
      .btn-success {
          background: #28a745;
          color: white;
      }
      
      .btn-secondary {
          background: #6c757d;
          color: white;
      }
      
      .results {
          margin-top: 30px;
          padding: 20px;
          background: #f8f9fa;
          border-radius: 12px;
      }
      
      .lottie-item {
          background: white;
          padding: 15px;
          margin-bottom: 15px;
          border-radius: 8px;
          border-left: 4px solid #ff6b6b;
      }
      
      .lottie-item h4 {
          margin-bottom: 10px;
          color: #333;
      }
      
      .lottie-url {
          font-family: monospace;
          font-size: 12px;
          color: #666;
          background: #f1f3f4;
          padding: 5px;
          border-radius: 4px;
          word-break: break-all;
          margin-bottom: 10px;
      }
      
      .preview-container {
          width: 200px;
          height: 200px;
          border: 2px dashed #ddd;
          margin: 10px 0;
          display: flex;
          align-items: center;
          justify-content: center;
          background: #fafafa;
      }
      
      .status {
          padding: 10px 15px;
          border-radius: 8px;
          margin-bottom: 15px;
          font-weight: 600;
      }
      
      .status.success { background: #d4edda; color: #155724; }
      .status.error { background: #f8d7da; color: #721c24; }
      .status.info { background: #d1ecf1; color: #0c5460; }
      .status.warning { background: #fff3cd; color: #856404; }
      
      .code-example {
          background: #2d3748;
          color: #e2e8f0;
          padding: 20px;
          border-radius: 8px;
          font-family: monospace;
          font-size: 14px;
          overflow-x: auto;
          margin: 15px 0;
      }
      
      .file-drop {
          border: 2px dashed #ccc;
          border-radius: 8px;
          padding: 40px;
          text-align: center;
          cursor: pointer;
          transition: all 0.3s;
      }
      
      .file-drop:hover {
          border-color: #ff6b6b;
          background: #fff5f5;
      }
      
      .file-drop.dragover {
          border-color: #ff6b6b;
          background: #fff5f5;
      }
  </style>
</head>
<body>
  <div class="container">
      <div class="header">
          <h1>ğŸ¯ çœŸå®Lottieçˆ¬å–å™¨</h1>
          <p>å¤šç§æ–¹å¼è·å–å’Œå¤„ç†LottieåŠ¨ç”»æ–‡ä»¶</p>
      </div>
      
      <div class="method-tabs">
          <button class="tab active" onclick="switchTab('proxy')">ğŸŒ ä»£ç†çˆ¬å–</button>
          <button class="tab" onclick="switchTab('paste')">ğŸ“‹ ç²˜è´´HTML</button>
          <button class="tab" onclick="switchTab('upload')">ğŸ“ ä¸Šä¼ æ–‡ä»¶</button>
          <button class="tab" onclick="switchTab('bookmarklet')">ğŸ”– ä¹¦ç­¾å·¥å…·</button>
      </div>
      
      <div class="tab-content">
          <!-- ä»£ç†çˆ¬å– -->
          <div class="method-section active" id="proxy">
              <h3>ğŸŒ é€šè¿‡ä»£ç†æœåŠ¡çˆ¬å–</h3>
              <div class="status warning">
                  <strong>æ³¨æ„ï¼š</strong> ä½¿ç”¨ç¬¬ä¸‰æ–¹ä»£ç†æœåŠ¡ï¼Œè¯·æ³¨æ„éšç§å’Œå®‰å…¨
              </div>
              
              <div class="input-group">
                  <label>ç›®æ ‡URL:</label>
                  <input type="url" id="proxyUrl" placeholder="https://t.me/nft/EasterEgg-58303" value="https://t.me/nft/EasterEgg-58303">
              </div>
              
              <div class="input-group">
                  <label>ä»£ç†æœåŠ¡:</label>
                  <select id="proxyService">
                      <option value="allorigins">AllOrigins (æ¨è)</option>
                      <option value="corsproxy">CORS Proxy</option>
                      <option value="thingproxy">ThingProxy</option>
                      <option value="custom">è‡ªå®šä¹‰ä»£ç†</option>
                  </select>
              </div>
              
              <button class="btn btn-primary" onclick="scrapeWithProxy()">ğŸš€ å¼€å§‹çˆ¬å–</button>
              <button class="btn btn-secondary" onclick="testConnection()">ğŸ”— æµ‹è¯•è¿æ¥</button>
          </div>
          
          <!-- ç²˜è´´HTML -->
          <div class="method-section" id="paste">
              <h3>ğŸ“‹ ç²˜è´´HTMLæºç </h3>
              <div class="status info">
                  <strong>ä½¿ç”¨æ–¹æ³•ï¼š</strong> 
                  1. æ‰“å¼€ç›®æ ‡é¡µé¢ï¼ŒæŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·<br>
                  2. å³é”®ç‚¹å‡»&lt;html&gt;æ ‡ç­¾ï¼Œé€‰æ‹©"Copy outerHTML"<br>
                  3. ç²˜è´´åˆ°ä¸‹é¢çš„æ–‡æœ¬æ¡†ä¸­
              </div>
              
              <div class="input-group">
                  <label>HTMLæºç :</label>
                  <textarea id="htmlContent" placeholder="ç²˜è´´å®Œæ•´çš„HTMLæºç ..."></textarea>
              </div>
              
              <button class="btn btn-primary" onclick="parseHTML()">ğŸ” è§£æHTML</button>
              <button class="btn btn-secondary" onclick="document.getElementById('htmlContent').value = ''">ğŸ—‘ï¸ æ¸…ç©º</button>
          </div>
          
          <!-- ä¸Šä¼ æ–‡ä»¶ -->
          <div class="method-section" id="upload">
              <h3>ğŸ“ ä¸Šä¼ HTMLæ–‡ä»¶</h3>
              
              <div class="file-drop" id="fileDrop">
                  <div>ğŸ“</div>
                  <p>æ‹–æ‹½HTMLæ–‡ä»¶åˆ°è¿™é‡Œï¼Œæˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶</p>
                  <input type="file" id="fileInput" accept=".html,.htm" style="display: none;">
              </div>
              
              <button class="btn btn-primary" onclick="document.getElementById('fileInput').click()">ğŸ“‚ é€‰æ‹©æ–‡ä»¶</button>
          </div>
          
          <!-- ä¹¦ç­¾å·¥å…· -->
          <div class="method-section" id="bookmarklet">
              <h3>ğŸ”– æµè§ˆå™¨ä¹¦ç­¾å·¥å…·</h3>
              <div class="status success">
                  <strong>æœ€ä½³æ–¹æ¡ˆï¼</strong> ç›´æ¥åœ¨ç›®æ ‡é¡µé¢è¿è¡Œï¼Œæ— è·¨åŸŸé™åˆ¶
              </div>
              
              <p><strong>ä½¿ç”¨æ­¥éª¤ï¼š</strong></p>
              <ol style="margin: 15px 0; padding-left: 20px;">
                  <li>å¤åˆ¶ä¸‹é¢çš„ä»£ç </li>
                  <li>åˆ›å»ºæ–°ä¹¦ç­¾ï¼Œå°†ä»£ç ç²˜è´´ä¸ºä¹¦ç­¾URL</li>
                  <li>åœ¨ç›®æ ‡é¡µé¢ç‚¹å‡»ä¹¦ç­¾è¿è¡Œ</li>
              </ol>
              
              <div class="code-example" id="bookmarkletCode">
javascript:(function(){
  const lotties = [];
  
  // æŸ¥æ‰¾æ‰€æœ‰å¯èƒ½çš„LottieåŠ¨ç”»
  function findLotties() {
      // 1. æŸ¥æ‰¾lottie-webå®ä¾‹
      if (window.lottie && window.lottie.getRegisteredAnimations) {
          window.lottie.getRegisteredAnimations().forEach(anim => {
              if (anim.path) {
                  lotties.push({
                      type: 'lottie-web',
                      url: anim.path,
                      name: anim.name || 'Unnamed Animation'
                  });
              }
          });
      }
      
      // 2. æŸ¥æ‰¾scriptæ ‡ç­¾ä¸­çš„JSON
      document.querySelectorAll('script').forEach(script => {
          const text = script.textContent;
          if (text.includes('"v":') && text.includes('"layers":')) {
              try {
                  const matches = text.match(/\{[^{}]*"v":\s*"[^"]*"[^{}]*"layers":\s*\[[^\]]*\][^{}]*\}/g);
                  matches?.forEach((match, i) => {
                      lotties.push({
                          type: 'inline-json',
                          data: JSON.parse(match),
                          name: `Inline Animation ${i + 1}`
                      });
                  });
              } catch (e) {}
          }
      });
      
      // 3. æŸ¥æ‰¾dataå±æ€§
      document.querySelectorAll('[data-lottie], [data-animation]').forEach((el, i) => {
          const data = el.dataset.lottie || el.dataset.animation;
          if (data) {
              try {
                  const parsed = JSON.parse(data);
                  lotties.push({
                      type: 'data-attribute',
                      data: parsed,
                      name: `Data Animation ${i + 1}`
                  });
              } catch (e) {
                  if (data.startsWith('http')) {
                      lotties.push({
                          type: 'data-url',
                          url: data,
                          name: `Data URL ${i + 1}`
                      });
                  }
              }
          }
      });
      
      // 4. æŸ¥æ‰¾å¯èƒ½çš„JSON URL
      const scripts = Array.from(document.querySelectorAll('script')).map(s => s.textContent).join(' ');
      const urls = scripts.match(/https?:\/\/[^\s"']+\.json/g) || [];
      urls.forEach((url, i) => {
          if (!lotties.some(l => l.url === url)) {
              lotties.push({
                  type: 'json-url',
                  url: url,
                  name: `JSON URL ${i + 1}`
              });
          }
      });
  }
  
  findLotties();
  
  // åˆ›å»ºç»“æœçª—å£
  const resultWindow = window.open('', '_blank', 'width=800,height=600');
  resultWindow.document.write(`
      <html>
      <head>
          <title>Lottieçˆ¬å–ç»“æœ</title>
          <style>
              body { font-family: Arial, sans-serif; padding: 20px; }
              .item { border: 1px solid #ddd; margin: 10px 0; padding: 15px; border-radius: 8px; }
              .type { background: #007bff; color: white; padding: 2px 8px; border-radius: 4px; font-size: 12px; }
              .url { font-family: monospace; background: #f8f9fa; padding: 5px; border-radius: 4px; word-break: break-all; }
              button { background: #28a745; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin: 5px; }
              button:hover { background: #218838; }
              .json-preview { background: #2d3748; color: #e2e8f0; padding: 10px; border-radius: 4px; font-family: monospace; font-size: 12px; max-height: 200px; overflow: auto; }
          </style>
      </head>
      <body>
          <h1>ğŸ¬ æ‰¾åˆ° ${lotties.length} ä¸ªLottieåŠ¨ç”»</h1>
          <p>æ¥æºé¡µé¢: ${window.location.href}</p>
          ${lotties.map((lottie, i) => `
              <div class="item">
                  <h3>${lottie.name} <span class="type">${lottie.type}</span></h3>
                  ${lottie.url ? `<div class="url">${lottie.url}</div>` : ''}
                  ${lottie.data ? `<div class="json-preview">${JSON.stringify(lottie.data, null, 2).substring(0, 500)}...</div>` : ''}
                  <div>
                      ${lottie.url ? `<button onclick="window.open('${lottie.url}')">ğŸ“– æŸ¥çœ‹JSON</button>` : ''}
                      <button onclick="downloadLottie(${i})">ğŸ“¥ ä¸‹è½½</button>
                      ${lottie.url ? `<button onclick="navigator.clipboard.writeText('${lottie.url}')">ğŸ“‹ å¤åˆ¶é“¾æ¥</button>` : ''}
                  </div>
              </div>
          `).join('')}
          
          <script>
              const lotties = ${JSON.stringify(lotties)};
              
              function downloadLottie(index) {
                  const lottie = lotties[index];
                  let data, filename;
                  
                  if (lottie.data) {
                      data = JSON.stringify(lottie.data, null, 2);
                      filename = lottie.name.replace(/[^a-z0-9]/gi, '_').toLowerCase() + '.json';
                  } else if (lottie.url) {
                      fetch(lottie.url)
                          .then(response => response.json())
                          .then(json => {
                              const data = JSON.stringify(json, null, 2);
                              const filename = lottie.name.replace(/[^a-z0-9]/gi, '_').toLowerCase() + '.json';
                              downloadFile(data, filename);
                          })
                          .catch(err => alert('ä¸‹è½½å¤±è´¥: ' + err.message));
                      return;
                  }
                  
                  if (data) {
                      downloadFile(data, filename);
                  }
              }
              
              function downloadFile(data, filename) {
                  const blob = new Blob([data], { type: 'application/json' });
                  const url = URL.createObjectURL(blob);
                  const a = document.createElement('a');
                  a.href = url;
                  a.download = filename;
                  a.click();
                  URL.revokeObjectURL(url);
              }
          </script>
      </body>
      </html>
  `);
})();
              </div>
              
              <button class="btn btn-success" onclick="copyBookmarklet()">ğŸ“‹ å¤åˆ¶ä¹¦ç­¾ä»£ç </button>
              <button class="btn btn-primary" onclick="createBookmark()">ğŸ”– åˆ›å»ºä¹¦ç­¾</button>
          </div>
      </div>
      
      <div class="results" id="results" style="display: none;">
          <h3>ğŸ¬ å‘ç°çš„LottieåŠ¨ç”»</h3>
          <div id="lottieList"></div>
      </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
  
  <script>
      let foundLotties = [];

      // åˆ‡æ¢æ ‡ç­¾
      function switchTab(tabName) {
          document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
          document.querySelectorAll('.method-section').forEach(section => section.classList.remove('active'));
          
          event.target.classList.add('active');
          document.getElementById(tabName).classList.add('active');
      }

      // æ˜¾ç¤ºçŠ¶æ€
      function showStatus(message, type = 'info') {
          const status = document.createElement('div');
          status.className = `status ${type}`;
          status.innerHTML = message;
          
          const activeSection = document.querySelector('.method-section.active');
          activeSection.insertBefore(status, activeSection.firstChild);
          
          setTimeout(() => status.remove(), 5000);
      }

      // ä»£ç†çˆ¬å–
      async function scrapeWithProxy() {
          const url = document.getElementById('proxyUrl').value;
          const service = document.getElementById('proxyService').value;
          
          if (!url) {
              showStatus('è¯·è¾“å…¥æœ‰æ•ˆçš„URL', 'error');
              return;
          }
          
          let proxyUrl;
          switch (service) {
              case 'allorigins':
                  proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(url)}`;
                  break;
              case 'corsproxy':
                  proxyUrl = `https://corsproxy.io/?${encodeURIComponent(url)}`;
                  break;
              case 'thingproxy':
                  proxyUrl = `https://thingproxy.freeboard.io/fetch/${url}`;
                  break;
              default:
                  showStatus('è¯·é€‰æ‹©ä»£ç†æœåŠ¡', 'error');
                  return;
          }
          
          try {
              showStatus('æ­£åœ¨é€šè¿‡ä»£ç†è·å–é¡µé¢å†…å®¹...', 'info');
              
              const response = await fetch(proxyUrl);
              const data = await response.json();
              const html = data.contents || data;
              
              if (html) {
                  parseLottieFromHTML(html);
              } else {
                  showStatus('æ— æ³•è·å–é¡µé¢å†…å®¹', 'error');
              }
          } catch (error) {
              showStatus(`ä»£ç†è¯·æ±‚å¤±è´¥: ${error.message}`, 'error');
          }
      }

      // æµ‹è¯•è¿æ¥
      async function testConnection() {
          const url = 'https://httpbin.org/get';
          const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(url)}`;
          
          try {
              showStatus('æ­£åœ¨æµ‹è¯•ä»£ç†è¿æ¥...', 'info');
              const response = await fetch(proxyUrl);
              const data = await response.json();
              
              if (data.contents) {
                  showStatus('ä»£ç†è¿æ¥æ­£å¸¸ï¼', 'success');
              } else {
                  showStatus('ä»£ç†è¿æ¥å¼‚å¸¸', 'error');
              }
          } catch (error) {
              showStatus(`è¿æ¥æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
          }
      }

      // è§£æHTML
      function parseHTML() {
          const html = document.getElementById('htmlContent').value;
          if (!html.trim()) {
              showStatus('è¯·ç²˜è´´HTMLæºç ', 'error');
              return;
          }
          
          parseLottieFromHTML(html);
      }

      // ä»HTMLä¸­è§£æLottie
      function parseLottieFromHTML(html) {
          foundLotties = [];
          
          // åˆ›å»ºä¸´æ—¶DOM
          const parser = new DOMParser();
          const doc = parser.parseFromString(html, 'text/html');
          
          // 1. æŸ¥æ‰¾scriptæ ‡ç­¾ä¸­çš„JSON
          doc.querySelectorAll('script').forEach((script, index) => {
              const text = script.textContent;
              
              // æŸ¥æ‰¾Lottie JSONç»“æ„
              if (text.includes('"v":') && text.includes('"layers":')) {
                  try {
                      // å°è¯•æå–JSON
                      const jsonMatches = text.match(/\{[^{}]*"v":\s*"[^"]*"[^{}]*"layers":\s*\[[^\]]*\][^{}]*\}/g);
                      jsonMatches?.forEach((match, i) => {
                          try {
                              const json = JSON.parse(match);
                              foundLotties.push({
                                  name: `Script Animation ${index}-${i}`,
                                  type: 'inline-json',
                                  data: json,
                                  source: 'Script Tag'
                              });
                          } catch (e) {}
                      });
                  } catch (e) {}
              }
              
              // æŸ¥æ‰¾JSON URL
              const urlMatches = text.match(/https?:\/\/[^\s"']+\.json/g);
              urlMatches?.forEach((url, i) => {
                  foundLotties.push({
                      name: `JSON URL ${index}-${i}`,
                      type: 'json-url',
                      url: url,
                      source: 'Script Tag'
                  });
              });
          });
          
          // 2. æŸ¥æ‰¾dataå±æ€§
          doc.querySelectorAll('[data-lottie], [data-animation], [data-src*=".json"]').forEach((el, index) => {
              const lottieData = el.dataset.lottie || el.dataset.animation;
              const srcData = el.dataset.src;
              
              if (lottieData) {
                  try {
                      const json = JSON.parse(lottieData);
                      foundLotties.push({
                          name: `Data Animation ${index}`,
                          type: 'data-attribute',
                          data: json,
                          source: 'Data Attribute'
                      });
                  } catch (e) {
                      if (lottieData.startsWith('http')) {
                          foundLotties.push({
                              name: `Data URL ${index}`,
                              type: 'data-url',
                              url: lottieData,
                              source: 'Data Attribute'
                          });
                      }
                  }
              }
              
              if (srcData && srcData.includes('.json')) {
                  foundLotties.push({
                      name: `Data Src ${index}`,
                      type: 'data-src',
                      url: srcData,
                      source: 'Data Src'
                  });
              }
          });
          
          // 3. æŸ¥æ‰¾å¯èƒ½çš„Lottieé…ç½®
          const allText = html;
          const configMatches = allText.match(/"animationData":\s*\{[^}]+\}/g);
          configMatches?.forEach((match, i) => {
              try {
                  const config = JSON.parse(`{${match}}`);
                  if (config.animationData) {
                      foundLotties.push({
                          name: `Config Animation ${i}`,
                          type: 'config-data',
                          data: config.animationData,
                          source: 'Animation Config'
                      });
                  }
              } catch (e) {}
          });
          
          displayResults();
          
          if (foundLotties.length > 0) {
              showStatus(`æˆåŠŸæ‰¾åˆ° ${foundLotties.length} ä¸ªLottieåŠ¨ç”»ï¼`, 'success');
          } else {
              showStatus('æœªæ‰¾åˆ°LottieåŠ¨ç”»æ–‡ä»¶', 'warning');
          }
      }

      // æ˜¾ç¤ºç»“æœ
      function displayResults() {
          const resultsDiv = document.getElementById('results');
          const listDiv = document.getElementById('lottieList');
          
          listDiv.innerHTML = '';
          
          foundLotties.forEach((lottie, index) => {
              const item = document.createElement('div');
              item.className = 'lottie-item';
              item.innerHTML = `
                  <h4>${lottie.name} <span style="background: #007bff; color: white; padding: 2px 8px; border-radius: 4px; font-size: 12px;">${lottie.type}</span></h4>
                  <p style="color: #666; margin-bottom: 10px;">æ¥æº: ${lottie.source}</p>
                  ${lottie.url ? `<div class="lottie-url">${lottie.url}</div>` : ''}
                  ${lottie.data ? `<div style="background: #f8f9fa; padding: 10px; border-radius: 4px; font-family: monospace; font-size: 12px; max-height: 100px; overflow: auto;">${JSON.stringify(lottie.data, null, 2).substring(0, 200)}...</div>` : ''}
                  <div style="margin-top: 10px;">
                      <button class="btn btn-success" onclick="downloadLottie(${index})">ğŸ“¥ ä¸‹è½½</button>
                      ${lottie.url ? `<button class="btn btn-primary" onclick="previewLottie('${lottie.url}')">ğŸ‘ï¸ é¢„è§ˆ</button>` : ''}
                      ${lottie.url ? `<button class="btn btn-secondary" onclick="copyUrl('${lottie.url}')">ğŸ“‹ å¤åˆ¶é“¾æ¥</button>` : ''}
                  </div>
              `;
              listDiv.appendChild(item);
          });
          
          resultsDiv.style.display = 'block';
      }

      // ä¸‹è½½Lottie
      function downloadLottie(index) {
          const lottie = foundLotties[index];
          let data, filename;
          
          if (lottie.data) {
              data = JSON.stringify(lottie.data, null, 2);
              filename = lottie.name.replace(/[^a-z0-9]/gi, '_').toLowerCase() + '.json';
              downloadFile(data, filename);
          } else if (lottie.url) {
              fetch(lottie.url)
                  .then(response => response.json())
                  .then(json => {
                      const data = JSON.stringify(json, null, 2);
                      const filename = lottie.name.replace(/[^a-z0-9]/gi, '_').toLowerCase() + '.json';
                      downloadFile(data, filename);
                      showStatus(`${lottie.name} ä¸‹è½½å®Œæˆï¼`, 'success');
                  })
                  .catch(err => {
                      showStatus(`ä¸‹è½½å¤±è´¥: ${err.message}`, 'error');
                  });
          }
      }

      // ä¸‹è½½æ–‡ä»¶
      function downloadFile(data, filename) {
          const blob = new Blob([data], { type: 'application/json' });
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = filename;
          a.click();
          URL.revokeObjectURL(url);
      }

      // é¢„è§ˆLottie
      function previewLottie(url) {
          window.open(url, '_blank');
      }

      // å¤åˆ¶URL
      function copyUrl(url) {
          navigator.clipboard.